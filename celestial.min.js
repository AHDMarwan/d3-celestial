// Copyright 2015 Olaf Frohn https://github.com/ofrohn, see LICENSE
!function(){function t(t){return document.getElementById(t)}function e(t,e){var r=a(t.map(function(t){return t*l}),e);return r.map(function(t){return t/l})}function a(t,e){var a,r,n,o,l,c,f,u,d,p,g=1e-5;return e?(c=t[0],0>c&&(c+=s),f=t[1],c-=e[0],o=e[1],l=e[2],a=Math.sin(f)*Math.sin(o)-Math.cos(f)*Math.cos(o)*Math.cos(c),Math.abs(a)<g&&(a=-Math.cos(f+o)+Math.cos(f)*Math.cos(o)*(1-Math.cos(c))),r=-Math.cos(f)*Math.sin(c),u=0!==a||0!==r?Math.atan2(r,a):c-Math.PI,d=l+u,d>Math.PI&&(d-=s),c%Math.PI===0?(p=f+Math.cos(c)*o,p>i&&(p=Math.PI-p),-i>p&&(p=-Math.PI-p)):(n=Math.sin(f)*Math.cos(o)+Math.cos(f)*Math.sin(o)*Math.cos(c),Math.abs(n)>.99?(p=Math.abs(Math.acos(Math.sqrt(a*a+r*r))),0>n&&(p*=-1)):p=Math.asin(n)),[d,p]):t}var r={};r.display=function(e){function a(t){return A.clip&&d3.geo.distance(D,t)>i?0:1}function s(t){return"translate("+G(t)+")"}function l(){if(d3.event){var t=G.rotate();B.scale(G.scale()),P.adaptable&&(F=Math.sqrt(G.scale()/O)),E=7*F,D=[-t[0],-t[1]],H.selectAll(".star").attr("d",T.pointRadius(function(t){return t.properties?b(t.properties.mag):1})).style("fill-opacity",function(t){return k(t.properties.mag)}),H.selectAll(".starname").attr("transform",function(t){return s(t.geometry.coordinates)}).style("fill-opacity",function(t){return 1==a(t.geometry.coordinates)&&1==k(t.properties.mag,!0)?1:0}),H.selectAll(".dso").attr("transform",function(t){return s(t.geometry.coordinates)}).attr("d",function(t){return c(t.properties)}).attr("style",function(t){return m(t.geometry.coordinates,t.properties)}),H.selectAll(".dsoname").attr("transform",function(t){return s(t.geometry.coordinates)}).attr("style",function(t){return m(t.geometry.coordinates,t.properties,!0)}),H.selectAll(".constname").attr("transform",function(t){return s(t.geometry.coordinates)}).style("fill-opacity",function(t){return a(t.geometry.coordinates)}),H.selectAll(".constline").attr("d",T),H.selectAll(".boundaryline").attr("d",T),H.selectAll(".mw").attr("d",T),H.selectAll(".ecliptic").attr("d",T),H.selectAll(".equatorial").attr("d",T),H.selectAll(".galactic").attr("d",T),H.selectAll(".supergalactic").attr("d",T),H.selectAll(".gridline").attr("d",T),H.selectAll(".outline").attr("d",C)}}function c(t){var e=y(t.mag,t.dim)||9,a=g(t.type);return-1!==d3.svg.symbolTypes.indexOf(a)?d3.svg.symbol().type(a).size(e)():d3.svg.customSymbol().type(a).size(e)()}function g(t){return t&&u.hasOwnProperty(t)?u[t].shape:"circle"}function h(t,e){return t.type&&u.hasOwnProperty(t.type)?e?"fill:"+u[t.type].stroke:"stroke:"+u[t.type].stroke+"; fill:"+u[t.type].fill:""}function m(t,e,r){var n=0;return 1==a(t)&&(n=1),h(e,r)+";stroke-opacity:"+n+";fill-opacity:"+n}function y(t,e){return t&&999!=t?Math.pow(2*E-t,1.4):Math.pow(parseInt(e)*E/7,.5)}function v(t){return""!==t.name?P.dsos.desig&&t.desig?t.desig:t.name:void 0}function M(t){return P.stars.desig!==!1||""!==t.name?P.stars.proper&&""!==t.name?t.name:P.stars.desig?t.desig:void 0:void 0}function b(t){if(null===t)return.2;var e=E*Math.exp(S*(t+2));return e>.2?e:.2}function w(t){return!P.stars.colors||isNaN(t.bv)?P.stars.color:d(t.bv)}function k(t,e){return e?t>P.stars.namelimit*F?0:1:t>P.stars.limit*F?0:1}var P,z,j;if(P=f.set(e),j=t("map")?"#map":"body",p.hasOwnProperty(P.projection)){var A=p[P.projection],q=P.transform||"equatorial",I=A.ratio||2,x=0===P.width?document.body.offsetWidth:P.width,_=x/I,O=A.scale*x/1024,E=7,S=-.3,F=1,D="galactic"==q?[0,0,0]:[180,0,0],G=r.projection(P.projection).rotate(n[q]).translate([x/2,_/2]).scale([O]),B=r.projection(P.projection).translate([x/2,_/2]).scale([O]);A.clip&&(G.clipAngle(90),z=d3.geo.circle().angle([90]));var N=d3.geo.zoom().projection(G).center([x/2,_/2]).scaleExtent([O,4*O]).on("zoom.redraw",l),R=d3.geo.graticule().minorStep([15,10]),T=d3.geo.path().projection(G),C=d3.geo.path().projection(B),H=d3.select(j).append("svg").attr("width",x).attr("height",_);P.interactive?H.call(N):H.attr("style","cursor: default!important"),z?H.append("path").datum(z).attr("class","outline").attr("d",C).style("fill",P.background):H.append("path").datum(R.outline).attr("class","outline").attr("d",C).style("fill",P.background),P.lines.graticule&&("equatorial"==q?H.append("path").datum(R).attr("class","gridline").attr("d",T):r.graticule(H,T,q));for(var Q in P.lines)P.lines.hasOwnProperty(Q)&&"graticule"!=Q&&P.lines[Q]!==!1&&H.append("path").datum(d3.geo.circle().angle([90]).origin(o[Q])).attr("class",Q).attr("d",T);P.mw.show&&d3.json("data/mw.json",function(t,e){return t?(window.alert("Your Browser doesn't support local file loading or the file doesn't exist. See readme.md"),console.warn(t)):void H.selectAll(".mway").data(e.features).enter().append("path").attr("class","mw").attr("d",T)}),P.constellations.show&&(d3.json("data/constellations.json",function(t,e){return t?console.warn(t):void H.selectAll(".constnames").data(e.features).enter().append("text").attr("class","constname").attr("transform",function(t){return s(t.geometry.coordinates)}).text(function(t){return P.constellations.names?P.constellations.desig?t.properties.desig:t.properties.name:void 0}).style("fill-opacity",function(t){return a(t.geometry.coordinates)})}),P.constellations.bounds&&d3.json("data/constellations.bounds.json",function(t,e){return t?console.warn(t):void H.selectAll(".bounds").data(e.features).enter().append("path").attr("class","boundaryline").attr("d",T)}),P.constellations.lines&&d3.json("data/constellations.lines.json",function(t,e){return t?console.warn(t):void H.selectAll(".lines").data(e.features).enter().append("path").attr("class","constline").attr("d",T)})),P.stars.show&&d3.json(P.stars.data,function(t,e){return t?console.warn(t):(H.selectAll(".stars").data(e.features.filter(function(t){return t.properties.mag<=P.stars.limit})).enter().append("path").attr("class","star").attr("d",T.pointRadius(function(t){return t.properties?b(t.properties.mag):1})).style("fill",function(t){return w(t.properties)}).style("fill-opacity",function(t){return k(t.properties.mag)}),void(P.stars.names&&H.selectAll(".starnames").data(e.features.filter(function(t){return t.properties.mag<=P.stars.namelimit})).enter().append("text").attr("transform",function(t){return s(t.geometry.coordinates)}).text(function(t){return M(t.properties)}).attr({dy:"-.5em",dx:".35em","class":"starname"}).style("fill-opacity",function(t){return 1==a(t.geometry.coordinates)&&1==k(t.properties.mag,!0)?1:0})))}),P.dsos.show&&d3.json(P.dsos.data,function(t,e){return t?console.warn(t):(H.selectAll(".dsos").data(e.features.filter(function(t){return 999==t.properties.mag&&Math.sqrt(parseInt(t.properties.dim))>P.dsos.limit||999!=t.properties.mag&&t.properties.mag<=P.dsos.limit})).enter().append("path").attr("class",function(t){return"dso "+t.properties.type}).attr("transform",function(t){return s(t.geometry.coordinates)}).attr("d",function(t){return c(t.properties)}).attr("style",function(t){return m(t.geometry.coordinates,t.properties)}),void(P.dsos.names&&H.selectAll(".dsonames").data(e.features.filter(function(t){return 999==t.properties.mag&&Math.sqrt(parseInt(t.properties.dim))>P.dsos.namelimit||999!=t.properties.mag&&t.properties.mag<=P.dsos.namelimit})).enter().append("text").attr("class",function(t){return"dsoname "+t.properties.type}).attr("transform",function(t){return s(t.geometry.coordinates)}).text(function(t){return v(t.properties)}).attr({dy:"-.5em",dx:".35em"}).attr("style",function(t){return m(t.geometry.coordinates,t.properties,!0)})))})}},r.projection=function(t){var e,a,r;if(!p.hasOwnProperty(t))throw new Error("Projection not supported: "+t);return e=p[t],a=null!==e.arg?d3.geo[t].raw(e.arg):d3.geo[t].raw,r=function(t,e){var r=a(-t,e);return r},r.invert=function(t,e){var r=a.invert(t,e);return r[0]*=-1,r},d3.geo.projection(r)};var n={equatorial:[180,0,0],ecliptic:[180,0,23.4393],galactic:[93.5949,28.9362,-58.5988],supergalactic:[137.31,59.5283,57.7303],mars:[97.5,23.5,29]},o={equatorial:[0,90],ecliptic:[-90,66.5607],galactic:[-167.1405,27.1283],supergalactic:[-76.2458,15.7089],mars:[-42.3186,52.8865]};r.eulerAngles=function(){return n},r.poles=function(){return o};var s=2*Math.PI,i=Math.PI/2,l=Math.PI/180;r.graticule=function(t,a,r){var n;if(r&&"equatorial"!=r){for(n=10;170>=n;n+=10)t.append("path").datum(d3.geo.circle().angle([n]).origin(o[r])).attr("class","gridline").attr("d",a);for(n=10;180>=n;n+=10)t.append("path").datum(d3.geo.circle().angle([90]).origin(e([n,0],c["inverse "+r]))).attr("class","gridline").attr("d",a)}};var c={ecliptic:[-90,23.4393,90],"inverse ecliptic":[90,23.4393,-90],galactic:[192.8595,62.8717,122.9319],"inverse galactic":[238.9319,62.8717,192.8595],supergalactic:[283.7542,74.2911,26.4504],"inverse supergalactic":[334.4504,74.2911,283.7542],init:function(){for(var t in this)this[t].constructor==Array&&(this[t]=this[t].map(function(t){return t*l}))},add:function(t,e){return e&&t&&3===e.length&&!this.hasOwnProperty(t)?(this[t]=e.map(function(t){return t*l}),this[t]):void 0}};c.init(),r.euler=function(){return c};var f={width:1024,projection:"aitoff",transform:"equatorial",background:"#000",adaptable:!0,interactive:!0,stars:{show:!0,limit:6,colors:!0,color:"#fff",names:!0,proper:!1,desig:!0,namelimit:2.5,data:"data/stars.6.json"},dsos:{show:!0,limit:6,names:!0,desig:!0,namelimit:4,data:"data/dsos.bright.json"},constellations:{show:!0,names:!0,desig:!0,lines:!0,bounds:!1},mw:{show:!0},lines:{graticule:!0,equatorial:!1,ecliptic:!0,galactic:!1,supergalactic:!1,mars:!1},set:function(t){var e,a,r={};if(!t)return this;for(e in this)if(this.hasOwnProperty(e)&&"function"!=typeof this[e])if(t.hasOwnProperty(e)&&null!==t[e])if(this[e].constructor!=Object)r[e]=t[e];else{r[e]={};for(a in this[e])r[e][a]=t[e].hasOwnProperty(a)?t[e][a]:this[e][a]}else r[e]=this[e];return r}};r.settings=function(){return f};var u={gg:{shape:"circle",stroke:"#f00",fill:"#f00"},g:{shape:"ellipse",stroke:"#f00",fill:"#f00"},s:{shape:"ellipse",stroke:"#f00",fill:"#f00"},s0:{shape:"ellipse",stroke:"#f00",fill:"#f00"},sd:{shape:"ellipse",stroke:"#f00",fill:"#f00"},e:{shape:"ellipse",stroke:"#f00",fill:"#f00"},i:{shape:"ellipse",stroke:"#f00",fill:"#f00"},oc:{shape:"circle",stroke:"#fc0",fill:"none"},gc:{shape:"circle",stroke:"#f90",fill:"#f90"},en:{shape:"square",stroke:"#f0c",fill:"#f0c"},bn:{shape:"square",stroke:"#f0c",fill:"none"},sfr:{shape:"square",stroke:"#c0f",fill:"none"},rn:{shape:"square",stroke:"#00f",fill:"#00f"},pn:{shape:"diamond",stroke:"#0cc",fill:"#0cc"},snr:{shape:"diamond",stroke:"#f0c",fill:"#f0c"},dn:{shape:"square",stroke:"#999",fill:"none"},pos:{shape:"marker",stroke:"#ccc",fill:"none"}},d=d3.scale.quantize().domain([3.347,-.335]).range(["#ff4700","#ff4b00","#ff4f00","#ff5300","#ff5600","#ff5900","#ff5b00","#ff5d00","#ff6000","#ff6300","#ff6500","#ff6700","#ff6900","#ff6b00","#ff6d00","#ff7000","#ff7300","#ff7500","#ff7800","#ff7a00","#ff7c00","#ff7e00","#ff8100","#ff8300","#ff8506","#ff870a","#ff8912","#ff8b1a","#ff8e21","#ff9127","#ff932c","#ff9631","#ff9836","#ff9a3c","#ff9d3f","#ffa148","#ffa34b","#ffa54f","#ffa753","#ffa957","#ffab5a","#ffad5e","#ffb165","#ffb269","#ffb46b","#ffb872","#ffb975","#ffbb78","#ffbe7e","#ffc184","#ffc489","#ffc78f","#ffc892","#ffc994","#ffcc99","#ffce9f","#ffd1a3","#ffd3a8","#ffd5ad","#ffd7b1","#ffd9b6","#ffdbba","#ffddbe","#ffdfc2","#ffe1c6","#ffe3ca","#ffe4ce","#ffe8d5","#ffe9d9","#ffebdc","#ffece0","#ffefe6","#fff0e9","#fff2ec","#fff4f2","#fff5f5","#fff6f8","#fff9fd","#fef9ff","#f9f6ff","#f6f4ff","#f3f2ff","#eff0ff","#ebeeff","#e9edff","#e6ebff","#e3e9ff","#e0e7ff","#dee6ff","#dce5ff","#d9e3ff","#d7e2ff","#d3e0ff","#c9d9ff","#bfd3ff","#b7ceff","#afc9ff","#a9c5ff","#a4c2ff","#9fbfff","#9bbcff"]),p={airy:{arg:Math.PI/2,scale:360,ratio:1,clip:!0},aitoff:{arg:null,scale:162},armadillo:{arg:0,scale:250},august:{arg:null,scale:94,ratio:1.4},azimuthalEqualArea:{arg:null,scale:220,ratio:1,clip:!0},azimuthalEquidistant:{arg:null,scale:150,ratio:1,clip:!0},baker:{arg:null,scale:160,ratio:1.4},berghaus:{arg:1,scale:320,ratio:1,clip:!0},boggs:{arg:null,scale:170},bonne:{arg:Math.PI/4,scale:230,ratio:.88},bromley:{arg:null,scale:162},collignon:{arg:null,scale:100,ratio:2.6},craig:{arg:0,scale:310,ratio:1.5,clip:!0},craster:{arg:null,scale:160},cylindricalEqualArea:{arg:Math.PI/6,scale:180},cylindricalStereographic:{arg:Math.PI/4,scale:230,ratio:1.3},eckert1:{arg:null,scale:175},eckert2:{arg:null,scale:175},eckert3:{arg:null,scale:190},eckert4:{arg:null,scale:190},eckert5:{arg:null,scale:182},eckert6:{arg:null,scale:182},eisenlohr:{arg:null,scale:102},equirectangular:{arg:null,scale:160},fahey:{arg:null,scale:196,ratio:1.4},foucaut:{arg:null,scale:142},ginzburg4:{arg:null,scale:180,ratio:1.7},ginzburg5:{arg:null,scale:196,ratio:1.55},ginzburg6:{arg:null,scale:190,ratio:1.4},ginzburg8:{arg:null,scale:205,ratio:1.3},ginzburg9:{arg:null,scale:190,ratio:1.4},gringorten:{arg:null,scale:360,ratio:1,clip:!0},hammer:{arg:2,scale:180},hatano:{arg:null,scale:186},healpix:{arg:1,scale:300,ratio:1.2},hill:{arg:2,scale:190,ratio:1.6},homolosine:{arg:null,scale:160,ratio:2.2},kavrayskiy7:{arg:null,scale:185,ratio:1.75},lagrange:{arg:Math.PI/2,scale:88,ratio:1.7,clip:!0},larrivee:{arg:null,scale:160,ratio:1.25},laskowski:{arg:null,scale:165,ratio:1.7},loximuthal:{arg:Math.PI/4,scale:170,ratio:1.8},mercator:{arg:null,scale:160,ratio:1.3},miller:{arg:null,scale:160,ratio:1.5},mollweide:{arg:null,scale:180},mtFlatPolarParabolic:{arg:null,scale:175},mtFlatPolarQuartic:{arg:null,scale:230,ratio:1.65},mtFlatPolarSinusoidal:{arg:null,scale:175,ratio:1.9},naturalEarth:{arg:null,scale:185,ratio:1.85},nellHammer:{arg:null,scale:160,ratio:2.6},orthographic:{arg:null,scale:480,ratio:1,clip:!0},patterson:{arg:null,scale:160,ratio:1.75},polyconic:{arg:null,scale:160,ratio:1.3},rectangularPolyconic:{arg:0,scale:160,ratio:1.65},robinson:{arg:null,scale:160},sinusoidal:{arg:null,scale:160,ratio:2},stereographic:{arg:null,scale:480,ratio:1,clip:!0},times:{arg:null,scale:210,ratio:1.4},twoPointEquidistant:{arg:Math.PI/2,scale:320,ratio:1.15,clip:!0},vanDerGrinten:{arg:null,scale:160,ratio:1},vanDerGrinten2:{arg:null,scale:160,ratio:1},vanDerGrinten3:{arg:null,scale:160,ratio:1},vanDerGrinten4:{arg:null,scale:160,ratio:1.6},wagner4:{arg:null,scale:185},wagner6:{arg:null,scale:160},wagner7:{arg:null,scale:190,ratio:1.8},wiechel:{arg:null,scale:360,ratio:1,clip:!0},winkel3:{arg:null,scale:196,ratio:1.7}};r.projections=function(){return p};var g=d3.map({ellipse:function(t){var e=Math.sqrt(t),a=.666*e,r=e/3;return"M"+-a+","+-r+" m"+-a+",0 a"+a+","+r+" 0 1,0"+2*a+",0 a"+a+","+r+" 0 1,0"+-(2*a)+",0"},marker:function(t){var e=t>48?t/4:12,a=e/2,r=a-3;return"M "+-a+" 0 h "+r+" M 0 "+-a+" v "+r+" M "+a+" 0 h "+-r+" M 0 "+a+" v "+-r}});d3.svg.customSymbol=function(){function t(t,r){return g.get(e.call(this,t,r))(a.call(this,t,r))}var e,a=64;return t.type=function(a){return arguments.length?(e=d3.functor(a),t):e},t.size=function(e){return arguments.length?(a=d3.functor(e),t):a},t},function(){function t(t,e,a){var r=t.translate(),n=Math.atan2(e[1]-r[1],e[0]-r[0])-Math.atan2(a[1]-r[1],a[0]-r[0]);return[Math.cos(n/2),0,0,Math.sin(n/2)]}function e(t,e){var a=t.invert(e);return a&&isFinite(a[0])&&isFinite(a[1])&&i(a)}function a(t){var e=.5*t[0]*u,a=.5*t[1]*u,r=.5*t[2]*u,n=Math.sin(e),o=Math.cos(e),s=Math.sin(a),i=Math.cos(a),l=Math.sin(r),c=Math.cos(r);return[o*i*c+n*s*l,n*i*c-o*s*l,o*s*c+n*i*l,o*i*l-n*s*c]}function r(t,e){var a=t[0],r=t[1],n=t[2],o=t[3],s=e[0],i=e[1],l=e[2],c=e[3];return[a*s-r*i-n*l-o*c,a*i+r*s+n*c-o*l,a*l-r*c+n*s+o*i,a*c+r*l-n*i+o*s]}function n(t,e){if(t&&e){var a=c(t,e),r=Math.sqrt(l(a,a)),n=.5*Math.acos(Math.max(-1,Math.min(1,l(t,e)))),o=Math.sin(n)/r;return r&&[Math.cos(n),a[2]*o,-a[1]*o,a[0]*o]}}function o(t,e){var a=Math.max(-1,Math.min(1,l(t,e))),r=0>a?-1:1,n=Math.acos(r*a),o=Math.sin(n);return o?function(a){var s=r*Math.sin((1-a)*n)/o,i=Math.sin(a*n)/o;return[t[0]*s+e[0]*i,t[1]*s+e[1]*i,t[2]*s+e[2]*i,t[3]*s+e[3]*i]}:function(){return t}}function s(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*d,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*d,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*d]}function i(t){var e=t[0]*u,a=t[1]*u,r=Math.cos(a);return[r*Math.cos(e),r*Math.sin(e),Math.sin(a)]}function l(t,e){for(var a=0,r=t.length,n=0;r>a;++a)n+=t[a]*e[a];return n}function c(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function f(t){for(var e=0,a=arguments.length,r=[];++e<a;)r.push(arguments[e]);var n=d3.dispatch.apply(null,r);return n.of=function(e,a){return function(r){try{var o=r.sourceEvent=d3.event;r.target=t,d3.event=r,n[r.type].apply(e,a)}finally{d3.event=o}}},n}var u=Math.PI/180,d=180/Math.PI;d3.geo.zoom=function(){function l(t){h++||t({type:"zoomstart"})}function c(t){t({type:"zoom"})}function u(t){--h||t({type:"zoomend"})}var d,p,g,h=0,m=f(y,"zoomstart","zoom","zoomend"),y=d3.behavior.zoom().on("zoomstart",function(){var o=d3.mouse(this),i=a(d.rotate()),f=e(d,o);f&&(g=f),v.call(y,"zoom",function(){d.scale(M.k=d3.event.scale);var a=d3.mouse(this),l=n(g,e(d,a));d.rotate(M.r=s(i=l?r(i,l):r(t(d,o,a),i))),o=a,c(m.of(this,arguments))}),l(m.of(this,arguments))}).on("zoomend",function(){v.call(y,"zoom",null),u(m.of(this,arguments))}),v=y.on,M={r:[0,0,0],k:1};return y.rotateTo=function(t){var e=n(i(t),i([-M.r[0],-M.r[1]]));return s(r(a(M.r),e))},y.projection=function(t){return arguments.length?(d=t,M={r:d.rotate(),k:d.scale()},y.scale(M.k)):d},y.duration=function(t){return arguments.length?(p=t,y):p},y.event=function(t){t.each(function(){var t=d3.select(this),e=m.of(this,arguments),r=M,n=d3.transition(t);if(n!==t){n.each("start.zoom",function(){this.__chart__&&(M=this.__chart__),d.rotate(M.r).scale(M.k),l(e)}).tween("zoom:zoom",function(){var t=y.size()[0],i=o(a(M.r),a(r.r)),l=d3.geo.distance(M.r,r.r),f=d3.interpolateZoom([0,0,t/M.k],[l,0,t/r.k]);return p&&n.duration(p(.001*f.duration)),function(a){var r=f(a);this.__chart__=M={r:s(i(r[0]/l)),k:t/r[2]},d.rotate(M.r).scale(M.k),y.scale(M.k),c(e)}}).each("end.zoom",function(){u(e)});try{n.each("interrupt.zoom",function(){u(e)})}catch(i){console.log(i)}}else this.__chart__=M,l(e),c(e),u(e)})},d3.rebind(y,m,"on")}}(),this.Celestial=r}();